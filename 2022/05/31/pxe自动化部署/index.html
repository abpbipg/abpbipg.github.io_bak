<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>pxe自动化部署 | Home</title><meta name="keywords" content="Linux"><meta name="author" content="躺平的Halo"><meta name="copyright" content="躺平的Halo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="PXE服务器的大致安装流程：DHCP+TFTP+FTP 1. DHCP服务器搭建安装DHCP服务器yum install dhcp-server # 安装dhcp服务器  编辑服务器配置文件。# file:&#x2F;etc&#x2F;dhcpd&#x2F;dhcpd.confsubnet 10.0.1.0 netmask 255.255.255.0 &amp;#123; # 指定网段range 10.0.1.100 10.0.1.2">
<meta property="og:type" content="article">
<meta property="og:title" content="pxe自动化部署">
<meta property="og:url" content="http://www.shut.ga/2022/05/31/pxe%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/index.html">
<meta property="og:site_name" content="Home">
<meta property="og:description" content="PXE服务器的大致安装流程：DHCP+TFTP+FTP 1. DHCP服务器搭建安装DHCP服务器yum install dhcp-server # 安装dhcp服务器  编辑服务器配置文件。# file:&#x2F;etc&#x2F;dhcpd&#x2F;dhcpd.confsubnet 10.0.1.0 netmask 255.255.255.0 &amp;#123; # 指定网段range 10.0.1.100 10.0.1.2">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/23.webp">
<meta property="article:published_time" content="2022-05-31T13:15:11.000Z">
<meta property="article:modified_time" content="2022-10-05T11:42:04.529Z">
<meta property="article:author" content="躺平的Halo">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/23.webp"><link rel="shortcut icon" href="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/1.webp"><link rel="canonical" href="http://www.shut.ga/2022/05/31/pxe%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'pxe自动化部署',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2022-10-05 19:42:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/1.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/23.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Home</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">pxe自动化部署</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2022-05-31T13:15:11.000Z" title="发表于 2022-05-31 21:15:11">2022-05-31</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="PXE服务器的大致安装流程：DHCP-TFTP-FTP"><a href="#PXE服务器的大致安装流程：DHCP-TFTP-FTP" class="headerlink" title="PXE服务器的大致安装流程：DHCP+TFTP+FTP"></a>PXE服务器的大致安装流程：DHCP+TFTP+FTP</h1><p><img src="/2022/05/31/pxe%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/1.png" alt="请求流程"></p>
<h2 id="1-DHCP服务器搭建"><a href="#1-DHCP服务器搭建" class="headerlink" title="1. DHCP服务器搭建"></a>1. DHCP服务器搭建</h2><h3 id="安装DHCP服务器"><a href="#安装DHCP服务器" class="headerlink" title="安装DHCP服务器"></a>安装DHCP服务器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install dhcp-server # 安装dhcp服务器</span><br></pre></td></tr></table></figure>

<h3 id="编辑服务器配置文件。"><a href="#编辑服务器配置文件。" class="headerlink" title="编辑服务器配置文件。"></a>编辑服务器配置文件。</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># file:/etc/dhcpd/dhcpd.conf</span><br><span class="line"></span><br><span class="line">subnet 10.0.1.0 netmask 255.255.255.0 &#123; # 指定网段</span><br><span class="line">range 10.0.1.100 10.0.1.200; # 指定地址池</span><br><span class="line">max-lease-time 120; # 指定最长租约时间</span><br><span class="line">default-lease-time 120; # 指定最短租约时间</span><br><span class="line">next-server 10.0.1.1; # 指定TFTP服务器地址</span><br><span class="line">filename &quot;pxelinux.0&quot;; # 指定需要加载的启动文件。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动服务，并配置防火墙"><a href="#启动服务，并配置防火墙" class="headerlink" title="启动服务，并配置防火墙"></a>启动服务，并配置防火墙</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start dhcpd</span><br><span class="line">systemctl enable dhcpd</span><br><span class="line">firewall-cmd --add-service=dhcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h2 id="2-TFTP服务器搭建CentOS8是不用配置的"><a href="#2-TFTP服务器搭建CentOS8是不用配置的" class="headerlink" title="2. TFTP服务器搭建						CentOS8是不用配置的"></a>2. TFTP服务器搭建						CentOS8是不用配置的</h2><h3 id="安装直接启动tftp服务器即可"><a href="#安装直接启动tftp服务器即可" class="headerlink" title="安装直接启动tftp服务器即可"></a>安装直接启动tftp服务器即可</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install tftp-server # 安装tftp服务器</span><br><span class="line"># 启动服务</span><br><span class="line">systemctl start tftp</span><br><span class="line">systemctl enable tftp</span><br><span class="line"># 配置防火墙</span><br><span class="line">firewall-cmd --add-service=tftp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h2 id="3-FTP服务器搭建"><a href="#3-FTP服务器搭建" class="headerlink" title="3. FTP服务器搭建"></a>3. FTP服务器搭建</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install vsftpd # 安装ftp服务器</span><br></pre></td></tr></table></figure>

<h3 id="配置vsftpd的配置文件"><a href="#配置vsftpd的配置文件" class="headerlink" title="配置vsftpd的配置文件"></a>配置vsftpd的配置文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># file: /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line">anonymous_enable=YES # 允许匿名用户登入</span><br><span class="line">local_enable=NO # 拒绝本地用户登入</span><br><span class="line">pasv_enable=YES # 指定启用被动连接模式。</span><br><span class="line">pasv_min_port=30000 # 指定被动连接的最小端口号</span><br><span class="line">pasv_max_port=40000 # 指定被动连接的最大端口号</span><br><span class="line">write_enable=NO # 禁止写入</span><br><span class="line">listen=YES # 指定为daemon模式启动，并且监听在IPv4端口上。</span><br><span class="line">dual_log_enable=YES # 开启日志记录，以方便排查问题。</span><br></pre></td></tr></table></figure>

<h3 id="配置启动服务"><a href="#配置启动服务" class="headerlink" title="配置启动服务"></a>配置启动服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start vsftpd</span><br><span class="line">systemctl enable vsftpd</span><br><span class="line"># 配置防火墙</span><br><span class="line">firewall-cmd --add-service=ftp --permanent</span><br><span class="line">firewall-cmd --add-port=30000-40000/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"># 配置SELinux Bool值</span><br><span class="line">setsebool ftpd_connect_all_unreserved on -P</span><br></pre></td></tr></table></figure>

<h2 id="4-文件部署"><a href="#4-文件部署" class="headerlink" title="4. 文件部署"></a>4. 文件部署</h2><h3 id="PXE引导文件部署"><a href="#PXE引导文件部署" class="headerlink" title="PXE引导文件部署"></a>PXE引导文件部署</h3><h3 id="PXE的引导程序在syslinux包中，这里直接安装即可。"><a href="#PXE的引导程序在syslinux包中，这里直接安装即可。" class="headerlink" title="PXE的引导程序在syslinux包中，这里直接安装即可。"></a>PXE的引导程序在<code>syslinux</code>包中，这里直接安装即可。</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install syslinux <span class="comment"># 安装syslinux</span></span><br><span class="line"><span class="comment"># 注意，这里会依赖安装 syslinux-nonlinux,实际上所需要的文件在 syslinux-nonlinux 包中。</span></span><br></pre></td></tr></table></figure>

<h3 id="将PXE的引导程序部署到TFTP服务器中。"><a href="#将PXE的引导程序部署到TFTP服务器中。" class="headerlink" title="将PXE的引导程序部署到TFTP服务器中。"></a>将PXE的引导程序部署到TFTP服务器中。</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp -r /usr/share/syslinux/ /var/lib/tftpboot/</span><br><span class="line">mkdir /usr/share/syslinux/pxelinux.cfg</span><br></pre></td></tr></table></figure>

<h3 id="编写PXE引导的配置文件"><a href="#编写PXE引导的配置文件" class="headerlink" title="编写PXE引导的配置文件."></a>编写PXE引导的配置文件.</h3><h3 id="注：以下这个文件我是直接从-CentOS8-中的镜像复制过来并修改的文件。"><a href="#注：以下这个文件我是直接从-CentOS8-中的镜像复制过来并修改的文件。" class="headerlink" title="注：以下这个文件我是直接从 CentOS8 中的镜像复制过来并修改的文件。"></a>注：以下这个文件我是直接从 CentOS8 中的镜像复制过来并修改的文件。</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># file:/var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line"></span><br><span class="line">default centos8/vesamenu.c32</span><br><span class="line">timeout 600</span><br><span class="line"></span><br><span class="line">display centos8/boot.msg</span><br><span class="line"></span><br><span class="line"># Clear the screen when exiting the menu, instead of leaving the menu displayed.</span><br><span class="line"># For vesamenu, this means the graphical background is still displayed without</span><br><span class="line"># the menu itself for as long as the screen remains in graphics mode.</span><br><span class="line">menu clear</span><br><span class="line">menu background centos8/splash.png</span><br><span class="line">menu title CentOS Linux 8.0.1905</span><br><span class="line">menu vshift 8</span><br><span class="line">menu rows 18</span><br><span class="line">menu margin 8</span><br><span class="line">#menu hidden</span><br><span class="line">menu helpmsgrow 15</span><br><span class="line">menu tabmsgrow 13</span><br><span class="line"></span><br><span class="line"># Border Area</span><br><span class="line">menu color border  #00000000 #00000000 none</span><br><span class="line"></span><br><span class="line"># Selected item</span><br><span class="line">menu color sel 0 #ffffffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Title bar</span><br><span class="line">menu color title 0 #ff7ba3d0 #00000000 none</span><br><span class="line"></span><br><span class="line"># Press [Tab] message</span><br><span class="line">menu color tabmsg 0 #ff3a6496 #00000000 none</span><br><span class="line"></span><br><span class="line"># Unselected menu item</span><br><span class="line">menu color unsel 0 #84b8ffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Selected hotkey</span><br><span class="line">menu color hotsel 0 #84b8ffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Unselected hotkey</span><br><span class="line">menu color hotkey 0 #ffffffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Help text</span><br><span class="line">menu color help 0 #ffffffff #00000000 none</span><br><span class="line"></span><br><span class="line"># A scrollbar of some type? Not sure.</span><br><span class="line">menu color scrollbar 0 #ffffffff #ff355594 none</span><br><span class="line"></span><br><span class="line"># Timeout msg</span><br><span class="line">menu color timeout 0 #ffffffff #00000000 none</span><br><span class="line">menu color timeout_msg 0 #ffffffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Command prompt text</span><br><span class="line">menu color cmdmark 0 #84b8ffff #00000000 none</span><br><span class="line">menu color cmdline 0 #ffffffff #00000000 none</span><br><span class="line"></span><br><span class="line"># Do not display the actual menu unless the user presses a key. All that is displayed is a timeout message.</span><br><span class="line"></span><br><span class="line">menu tabmsg Press Tab for full configuration options on menu items.</span><br><span class="line"></span><br><span class="line">menu separator # insert an empty line</span><br><span class="line">menu separator # insert an empty line</span><br><span class="line"># 最重要的就是以下的label段了，这个才是真正的引导选项。</span><br><span class="line">label linux</span><br><span class="line">menu label Install CentOS Linux 8.0.1905 by ^Manual</span><br><span class="line">menu default # 默认将启用这个label，如果有需求可以将此标签移动到以下任意一个中。</span><br><span class="line">kernel centos8/vmlinuz</span><br><span class="line">append initrd=centos8/initrd.img inst.repo=ftp://10.0.1.1/media</span><br><span class="line"></span><br><span class="line">label vnc</span><br><span class="line">menu label install CentOS Linux 8.0.1905 by ^Vnc</span><br><span class="line">kernel centos8/vmlinuz</span><br><span class="line">append initrd=centos8/initrd.img inst.repo=ftp://10.0.1.1/media inst.vnc inst.vncconnect=10.0.1.254</span><br><span class="line"></span><br><span class="line">label kickstart</span><br><span class="line">menu label install CentOS Linux 8.0.1905 by ^KickStart</span><br><span class="line">kernel centos8/vmlinuz</span><br><span class="line">append initrd=centos8/initrd.img inst.repo=ftp://10.0.1.1/media inst.ks=ftp://10.0.1.1/ks.cfg</span><br></pre></td></tr></table></figure>

<h3 id="内核文件部署"><a href="#内核文件部署" class="headerlink" title="内核文件部署"></a>内核文件部署</h3><h4 id="现在开始部署内核文件。"><a href="#现在开始部署内核文件。" class="headerlink" title="现在开始部署内核文件。"></a>现在开始部署内核文件。</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mount /dev/cdrom /media/</span><br><span class="line">mkdir /var/lib/tftpboot/centos8/</span><br><span class="line">for i in boot.msg initrd.img splash.png vesamenu.c32 vmlinuz; do</span><br><span class="line">cp /media/isolinux/$i /var/lib/tftpboot/centos8/</span><br><span class="line">done</span><br><span class="line"># 注：最重要的文件就是 initrd.img 和 vmlinuz 文件了，其他文件并不是必要文件。</span><br><span class="line"># 这些文件都是根据 /var/lib/tftpboot/pxelinux.cfg/default 中需要的文件来进行配置的。</span><br></pre></td></tr></table></figure>

<h4 id="x2F-var-x2F-lib-x2F-tftpboot-中的文件权限配置"><a href="#x2F-var-x2F-lib-x2F-tftpboot-中的文件权限配置" class="headerlink" title="&#x2F;var&#x2F;lib&#x2F;tftpboot 中的文件权限配置"></a>&#x2F;var&#x2F;lib&#x2F;tftpboot 中的文件权限配置</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 配置SELinux</span><br><span class="line">yum install policycoreutils-python-utils # 安装SELinux的管理工具</span><br><span class="line">semanage fcontext -m -t tftpdir_t &#x27;/var/lib/tftpboot(/.)?&#x27; #去除tftp目录的写入权限。</span><br><span class="line">restorecon -R /var/lib/tftpboot/</span><br><span class="line"># 由于修改了tftp服务器的工作目录的SELinux，以下选项可能需要开启。</span><br><span class="line">setsebool tftp_home_dir on -P</span><br></pre></td></tr></table></figure>

<h4 id="镜像部署"><a href="#镜像部署" class="headerlink" title="镜像部署"></a>镜像部署</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir /var/ftp/media</span><br><span class="line">mount /dev/cdrom /var/ftp/media/</span><br><span class="line"># 配置SELinux，以允许vsftpd读取 iso 中的文件。</span><br><span class="line">setsebool ftpd_full_access on -P</span><br></pre></td></tr></table></figure>

<h4 id="编写挂载配置文件，使其永久生效"><a href="#编写挂载配置文件，使其永久生效" class="headerlink" title="编写挂载配置文件，使其永久生效"></a>编写挂载配置文件，使其永久生效</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># file: /etc/fstab</span><br><span class="line"></span><br><span class="line">……</span><br><span class="line">/dev/cdrom /var/ftp/media iso9660 ro 0 0</span><br></pre></td></tr></table></figure>

<h4 id="kickstart-文件编写"><a href="#kickstart-文件编写" class="headerlink" title="kickstart 文件编写"></a>kickstart 文件编写</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># file:/var/ftp/ks.cfg</span><br><span class="line"></span><br><span class="line">ignoredisk --only-use=sda # 忽略磁盘</span><br><span class="line">autopart --type=lvm # 自动划分分区为LVM格式。</span><br><span class="line">clearpart --drives=sda --initlabel # 请求磁盘，并且自动初始化</span><br><span class="line">graphical # 图形化安装，这里可以改成文本化安装 text</span><br><span class="line">url --url ftp://10.0.1.1/media # 指定镜像URL路径</span><br><span class="line">keyboard --vckeymap=cn --xlayouts=&#x27;cn&#x27; # 指定键盘格式</span><br><span class="line">lang zh_CN.UTF-8 # 指定操作系统语言格式</span><br><span class="line">network --bootproto=dhcp --device=ens33 --onboot=yes --ipv6=no # 配置网卡信息</span><br><span class="line">network --hostname=localhost.localdomain</span><br><span class="line">rootpw --iscrypted $6$vWrO/QvhTZdsiSOe$eodg5O1KrdqZbxenHfqbBtz0eULiVWK8.YEV8ZFrgREroZD.pf6vB3LSh5.kaCH5QXXFhIOvIWOI04R52iTP//</span><br><span class="line"># 密码可以通过 openssl passwd -6 -salt `openssl rand -hex 4` ，这个命令生成。这里的密码为 123456</span><br><span class="line">firstboot --enable</span><br><span class="line">skipx # 跳过图形化配置</span><br><span class="line">services --enabled=&quot;chronyd&quot;</span><br><span class="line">timezone Asia/Shanghai # 设置上海时区</span><br><span class="line">%packages # 指定安装包,这里选择的是最小化安装，同时还安装了 kdump 工具。</span><br><span class="line">@minimal-environment</span><br><span class="line">kexec-tools</span><br><span class="line">%end</span><br><span class="line">%addon com_redhat_kdump --enable --reserve-mb=&#x27;auto&#x27;</span><br><span class="line">%end</span><br><span class="line">%anaconda</span><br><span class="line">pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok</span><br><span class="line">pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>

<h2 id="5-测试可用"><a href="#5-测试可用" class="headerlink" title="5. 测试可用"></a>5. 测试可用</h2><h3 id="注：-这里需要强调一点，用于测试的虚拟机内存大小一点要大于等于2G，否则无法正常安装操作系统！！！！！！"><a href="#注：-这里需要强调一点，用于测试的虚拟机内存大小一点要大于等于2G，否则无法正常安装操作系统！！！！！！" class="headerlink" title="注： 这里需要强调一点，用于测试的虚拟机内存大小一点要大于等于2G，否则无法正常安装操作系统！！！！！！"></a>注： 这里需要强调一点，用于测试的虚拟机内存大小一点要大于等于2G，否则无法正常安装操作系统！！！！！！</h3><h1 id="DHCP-TFTP-HTTP"><a href="#DHCP-TFTP-HTTP" class="headerlink" title="DHCP+TFTP+HTTP"></a>DHCP+TFTP+HTTP</h1><h2 id="安装dhcp"><a href="#安装dhcp" class="headerlink" title="安装dhcp"></a>安装dhcp</h2><h2 id="x2F-etc-x2F-dhcp-x2F-dhcpd-conf简化可以同上"><a href="#x2F-etc-x2F-dhcp-x2F-dhcpd-conf简化可以同上" class="headerlink" title="&#x2F;etc&#x2F;dhcp&#x2F;dhcpd.conf					简化可以同上"></a>&#x2F;etc&#x2F;dhcp&#x2F;dhcpd.conf					简化可以同上</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">allow booting;</span><br><span class="line"></span><br><span class="line">allow bootp;</span><br><span class="line"></span><br><span class="line">ddns-update-style interim;</span><br><span class="line"></span><br><span class="line">ignore client-updates;</span><br><span class="line"></span><br><span class="line">subnet 192.168.10.0 netmask 255.255.255.0 &#123;</span><br><span class="line"></span><br><span class="line">option subnet-mask 255.255.255.0;</span><br><span class="line"></span><br><span class="line">option domain-name-servers 192.168.10.10;</span><br><span class="line"></span><br><span class="line">range dynamic-bootp 192.168.10.100 192.168.10.200;</span><br><span class="line"></span><br><span class="line">default-lease-time 21600;</span><br><span class="line"></span><br><span class="line">max-lease-time 43200;</span><br><span class="line"></span><br><span class="line">next-server 192.168.10.10;</span><br><span class="line"></span><br><span class="line">filename &quot;pxelinux.0&quot;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Systemctl restart dhcpd</span><br><span class="line"></span><br><span class="line">Systemctl enable dhcpd</span><br></pre></td></tr></table></figure>

<h2 id="3-安装tftpCentOS8不用配置"><a href="#3-安装tftpCentOS8不用配置" class="headerlink" title="3. 安装tftp								CentOS8不用配置"></a>3. 安装tftp								CentOS8不用配置</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Yum install -y tftp-server xinetd</span><br><span class="line"></span><br><span class="line">Vim /etc/xinetd.d/tftp</span><br><span class="line"></span><br><span class="line">service tftp&#123;</span><br><span class="line"></span><br><span class="line">socket_type = dgram</span><br><span class="line"></span><br><span class="line">protocol = udpwait = yes</span><br><span class="line"></span><br><span class="line">user = root</span><br><span class="line"></span><br><span class="line">server = /usr/sbin/in.tftpd</span><br><span class="line"></span><br><span class="line">server_args = -s /var/lib/tftpboot</span><br><span class="line"></span><br><span class="line">disable = no   把YES改为NO</span><br><span class="line"></span><br><span class="line">per_source = 11</span><br><span class="line"></span><br><span class="line">cps = 100 2</span><br><span class="line"></span><br><span class="line">flags = IPv4&#125;</span><br></pre></td></tr></table></figure>

<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><h2 id="3-安装加载引导服务程序"><a href="#3-安装加载引导服务程序" class="headerlink" title="3.安装加载引导服务程序"></a>3.安装加载引导服务程序</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Yum install -y syslinux </span><br><span class="line"></span><br><span class="line">cd /var/lib/tftpboot</span><br><span class="line"></span><br><span class="line">cp /usr/share/syslinux/pxelinux.0 .</span><br><span class="line">cp/mnt/cdrom/images/pxeboot/&#123;vmlinuz,initrd.img&#125;. </span><br><span class="line">cp/mnt/cdrom/isolinux/&#123;vesamenu.c32,boot.msg&#125; .</span><br><span class="line"></span><br><span class="line">mkdir /var/lib/tftpboot/pxelinux.cfg</span><br><span class="line"></span><br><span class="line">cp /mnt/cdrom/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span><br></pre></td></tr></table></figure>

<h3 id="Vim-x2F-var-x2F-lib-x2F-tftpboot-x2F-pxelinux-cfg-x2F-default"><a href="#Vim-x2F-var-x2F-lib-x2F-tftpboot-x2F-pxelinux-cfg-x2F-default" class="headerlink" title="Vim 	&#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;pxelinux.cfg&#x2F;default"></a>Vim 	&#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;pxelinux.cfg&#x2F;default</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">default linux		#default vesamenu.c32 名称改</span><br><span class="line"></span><br><span class="line">label linux</span><br><span class="line"></span><br><span class="line">menu label ^Install Red Hat Enterprise Linux 7.2</span><br><span class="line"></span><br><span class="line">kernel vmlinuz</span><br><span class="line"></span><br><span class="line">append initrd=initrd.img inst.stage2=http://192.168.10.10/cdrom ks=http://192.168.10.10/ks.cfg quiet  把地址改为HTTP的CDROM</span><br><span class="line"></span><br><span class="line">#append initrd=initrd.img inst.stage2=hd:LABEL=RHEL-7.2x20Server.x86_64 quiet</span><br></pre></td></tr></table></figure>

<h2 id="4-安装HTTP"><a href="#4-安装HTTP" class="headerlink" title="4. 安装HTTP"></a>4. 安装HTTP</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp -r /mnt/cdrom/ /var/www/html/cdrom</span><br><span class="line"></span><br><span class="line">cp ~/anaconda-ks.cfg /var/www/html/ks.cfg</span><br><span class="line"></span><br><span class="line">chown apache:apache /var/www/html/ks.cfg</span><br></pre></td></tr></table></figure>

<h3 id="vim-x2F-var-x2F-www-x2F-html-x2F-ks-cfg"><a href="#vim-x2F-var-x2F-www-x2F-html-x2F-ks-cfg" class="headerlink" title="vim &#x2F;var&#x2F;www&#x2F;html&#x2F;ks.cfg"></a>vim &#x2F;var&#x2F;www&#x2F;html&#x2F;ks.cfg</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Use CDROM installation media</span><br><span class="line"></span><br><span class="line">#cdrom</span><br><span class="line"></span><br><span class="line">url --url=http://192.168.10.10/cdrom </span><br><span class="line">...</span><br><span class="line">..</span><br><span class="line"># Partition clearing information</span><br><span class="line"></span><br><span class="line">#clearpart --none --initlabel</span><br><span class="line"></span><br><span class="line">clearpart --all --initlabel</span><br></pre></td></tr></table></figure>

<h3 id="新建虚拟机-完成"><a href="#新建虚拟机-完成" class="headerlink" title="新建虚拟机  完成"></a>新建虚拟机  完成</h3></article><div class="tag_share"><div class="post_share"><div class="social-share" data-image="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/23.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/31/tomcat/"><img class="prev-cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/5.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Tomcat</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/01/vsftp/"><img class="next-cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/21.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vsftp</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/09/C8%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" title="C8磁盘管理"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/4.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-09</div><div class="title">C8磁盘管理</div></div></a></div><div><a href="/2022/10/05/CA%E8%AF%81%E4%B9%A6-for-Centos8/" title="CA证书 for Centos8"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/15.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-05</div><div class="title">CA证书 for Centos8</div></div></a></div><div><a href="/2022/06/13/Keepalived/" title="Keepalived"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/7.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-13</div><div class="title">Keepalived</div></div></a></div><div><a href="/2022/05/14/Linux%E4%BB%93%E5%BA%93/" title="linux仓库&amp;&amp; RPM"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/27.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-14</div><div class="title">linux仓库&amp;&amp; RPM</div></div></a></div><div><a href="/2022/06/13/Linux%E8%81%9A%E5%90%88%E9%93%BE%E8%B7%AF/" title="Linux聚合链路"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/34.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-13</div><div class="title">Linux聚合链路</div></div></a></div><div><a href="/2022/05/30/ISCSI-Linux/" title="ISCSI Linux"><img class="cover" src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-30</div><div class="title">ISCSI Linux</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/1.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">躺平的Halo</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/abpbipg"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to my website</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PXE%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%A4%A7%E8%87%B4%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%9ADHCP-TFTP-FTP"><span class="toc-number">1.</span> <span class="toc-text">PXE服务器的大致安装流程：DHCP+TFTP+FTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-DHCP%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA"><span class="toc-number">1.1.</span> <span class="toc-text">1. DHCP服务器搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85DHCP%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">安装DHCP服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number">1.1.2.</span> <span class="toc-text">编辑服务器配置文件。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%B9%B6%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.1.3.</span> <span class="toc-text">启动服务，并配置防火墙</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-TFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BACentOS8%E6%98%AF%E4%B8%8D%E7%94%A8%E9%85%8D%E7%BD%AE%E7%9A%84"><span class="toc-number">1.2.</span> <span class="toc-text">2. TFTP服务器搭建						CentOS8是不用配置的</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%9B%B4%E6%8E%A5%E5%90%AF%E5%8A%A8tftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8D%B3%E5%8F%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装直接启动tftp服务器即可</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-FTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA"><span class="toc-number">1.3.</span> <span class="toc-text">3. FTP服务器搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEvsftpd%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.</span> <span class="toc-text">配置vsftpd的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.2.</span> <span class="toc-text">配置启动服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2"><span class="toc-number">1.4.</span> <span class="toc-text">4. 文件部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PXE%E5%BC%95%E5%AF%BC%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2"><span class="toc-number">1.4.1.</span> <span class="toc-text">PXE引导文件部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PXE%E7%9A%84%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F%E5%9C%A8syslinux%E5%8C%85%E4%B8%AD%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9B%B4%E6%8E%A5%E5%AE%89%E8%A3%85%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">1.4.2.</span> <span class="toc-text">PXE的引导程序在syslinux包中，这里直接安装即可。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86PXE%E7%9A%84%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F%E9%83%A8%E7%BD%B2%E5%88%B0TFTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E3%80%82"><span class="toc-number">1.4.3.</span> <span class="toc-text">将PXE的引导程序部署到TFTP服务器中。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99PXE%E5%BC%95%E5%AF%BC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.4.</span> <span class="toc-text">编写PXE引导的配置文件.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%EF%BC%9A%E4%BB%A5%E4%B8%8B%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E6%88%91%E6%98%AF%E7%9B%B4%E6%8E%A5%E4%BB%8E-CentOS8-%E4%B8%AD%E7%9A%84%E9%95%9C%E5%83%8F%E5%A4%8D%E5%88%B6%E8%BF%87%E6%9D%A5%E5%B9%B6%E4%BF%AE%E6%94%B9%E7%9A%84%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number">1.4.5.</span> <span class="toc-text">注：以下这个文件我是直接从 CentOS8 中的镜像复制过来并修改的文件。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2"><span class="toc-number">1.4.6.</span> <span class="toc-text">内核文件部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%B0%E5%9C%A8%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%E5%86%85%E6%A0%B8%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">现在开始部署内核文件。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x2F-var-x2F-lib-x2F-tftpboot-%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.6.2.</span> <span class="toc-text">&#x2F;var&#x2F;lib&#x2F;tftpboot 中的文件权限配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E9%83%A8%E7%BD%B2"><span class="toc-number">1.4.6.3.</span> <span class="toc-text">镜像部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%8C%82%E8%BD%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%BF%E5%85%B6%E6%B0%B8%E4%B9%85%E7%94%9F%E6%95%88"><span class="toc-number">1.4.6.4.</span> <span class="toc-text">编写挂载配置文件，使其永久生效</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kickstart-%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-number">1.4.6.5.</span> <span class="toc-text">kickstart 文件编写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95%E5%8F%AF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">5. 测试可用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%EF%BC%9A-%E8%BF%99%E9%87%8C%E9%9C%80%E8%A6%81%E5%BC%BA%E8%B0%83%E4%B8%80%E7%82%B9%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%B5%8B%E8%AF%95%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F%E4%B8%80%E7%82%B9%E8%A6%81%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E2G%EF%BC%8C%E5%90%A6%E5%88%99%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">1.5.1.</span> <span class="toc-text">注： 这里需要强调一点，用于测试的虚拟机内存大小一点要大于等于2G，否则无法正常安装操作系统！！！！！！</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DHCP-TFTP-HTTP"><span class="toc-number">2.</span> <span class="toc-text">DHCP+TFTP+HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85dhcp"><span class="toc-number">2.1.</span> <span class="toc-text">安装dhcp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#x2F-etc-x2F-dhcp-x2F-dhcpd-conf%E7%AE%80%E5%8C%96%E5%8F%AF%E4%BB%A5%E5%90%8C%E4%B8%8A"><span class="toc-number">2.2.</span> <span class="toc-text">&#x2F;etc&#x2F;dhcp&#x2F;dhcpd.conf					简化可以同上</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85tftpCentOS8%E4%B8%8D%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">3. 安装tftp								CentOS8不用配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">2.3.1.</span> <span class="toc-text">关闭防火墙</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85%E5%8A%A0%E8%BD%BD%E5%BC%95%E5%AF%BC%E6%9C%8D%E5%8A%A1%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.4.</span> <span class="toc-text">3.安装加载引导服务程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vim-x2F-var-x2F-lib-x2F-tftpboot-x2F-pxelinux-cfg-x2F-default"><span class="toc-number">2.4.1.</span> <span class="toc-text">Vim 	&#x2F;var&#x2F;lib&#x2F;tftpboot&#x2F;pxelinux.cfg&#x2F;default</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%89%E8%A3%85HTTP"><span class="toc-number">2.5.</span> <span class="toc-text">4. 安装HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vim-x2F-var-x2F-www-x2F-html-x2F-ks-cfg"><span class="toc-number">2.5.1.</span> <span class="toc-text">vim &#x2F;var&#x2F;www&#x2F;html&#x2F;ks.cfg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA-%E5%AE%8C%E6%88%90"><span class="toc-number">2.5.2.</span> <span class="toc-text">新建虚拟机  完成</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/05/CA%E8%AF%81%E4%B9%A6-for-Centos8/" title="CA证书 for Centos8"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/15.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CA证书 for Centos8"/></a><div class="content"><a class="title" href="/2022/10/05/CA%E8%AF%81%E4%B9%A6-for-Centos8/" title="CA证书 for Centos8">CA证书 for Centos8</a><time datetime="2022-10-05T11:42:05.986Z" title="发表于 2022-10-05 19:42:05">2022-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/05/NFS/" title="NFS"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/9.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NFS"/></a><div class="content"><a class="title" href="/2022/10/05/NFS/" title="NFS">NFS</a><time datetime="2022-10-05T11:42:05.005Z" title="发表于 2022-10-05 19:42:05">2022-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/13/Keepalived/" title="Keepalived"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Keepalived"/></a><div class="content"><a class="title" href="/2022/06/13/Keepalived/" title="Keepalived">Keepalived</a><time datetime="2022-06-13T12:08:17.000Z" title="发表于 2022-06-13 20:08:17">2022-06-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/13/Linux%E8%81%9A%E5%90%88%E9%93%BE%E8%B7%AF/" title="Linux聚合链路"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/34.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux聚合链路"/></a><div class="content"><a class="title" href="/2022/06/13/Linux%E8%81%9A%E5%90%88%E9%93%BE%E8%B7%AF/" title="Linux聚合链路">Linux聚合链路</a><time datetime="2022-06-13T01:41:06.000Z" title="发表于 2022-06-13 09:41:06">2022-06-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/03/%E5%90%AC%E6%AD%8C/" title="听歌"><img src="https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/25.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="听歌"/></a><div class="content"><a class="title" href="/2022/06/03/%E5%90%AC%E6%AD%8C/" title="听歌">听歌</a><time datetime="2022-06-03T09:47:40.000Z" title="发表于 2022-06-03 17:47:40">2022-06-03</time></div></div></div></div></div></div></main></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html><footer id="footer" style="background-image: url('https://jsd.eagleyao.com/gh/abpbipg/image-hosting@master/23.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 躺平的Halo</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer>